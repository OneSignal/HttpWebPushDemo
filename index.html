<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Web Push Demo by Hiptic</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <link rel="manifest" href="/WebPushDemo/manifest.json">
    <meta name="viewport" content="width=device-width">
    <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js"></script>
    <script src="javascripts/onesignal-init.js"></script>
    <script src="javascripts/web-push-playground.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <header>
            <h1>OneSignal <br/> Web Push Demo</h1>
        </header>
        <section>
            <h3>
                <a id="how-does-this-demo-work" class="anchor" href="#how-does-this-demo-work" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How does this demo work?</h3>
            
            <p>This page will update based on your subscription state. Try subscribing and unsubscribing, send yourself notifications, and tagging yourself with random data below.</p>
            <h3>
                <a id="how-can-i-reset-my-state-to-test-like-a-new-user" class="anchor" href="#how-can-i-reset-my-state-to-test-like-a-new-user" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How can I reset my state to test like a new user?</h3>
            <p>Please <a href="https://documentation.onesignal.com/docs/troubleshooting-web-push#section-clearing-your-cache-and-resetting-push-permissions" target="doc">follow these instructions</a> to wipe your site's storage and reset your notification permissions.</p>
            <p><em>Be sure to close</em> all existing tabs to this site after following those instructions, or simply restart your browser, to complete the reset process.</p>

            <h3>Where can I see the code?</h3>
            <ul>
                <li><strong>onesignal-init.js</strong> - Initializes the OneSignal web SDK <a href="https://github.com/Hiptic/WebPushDemo/blob/gh-pages/javascripts/onesignal-init.js" target="code">(view)</a></li>
                <li><strong>web-push-playground.js</strong> - Sends notifications, tags, and shows/hides sections on the page based on the live SDK state <a href="https://github.com/Hiptic/WebPushDemo/blob/gh-pages/javascripts/web-push-playground.js" target="code">(view)</a></li>
            </ul>

            <hr>

            <div class="hidden show-when-subscribed">
                <h3>How can I access my dashboard and see my users?</h3>

                <p>If you don't have a pre-assigned login, you can log in to this app's <a href="https://onesignal.com" target="login">OneSignal dashboard</a> with:</p>
                <ul>
                    <li>
                        <strong>Username:</strong> <code>jason+webpushdemo@onesignal.com</code>
                    </li>
                    <li>
                        <strong>Password:</strong> <code>123123123</code>
                    </li>
                </ul>

                <h3>Send a Notification</h3>
                
                <p>You can paste this code below into the Developer Tools Console of this page, or click below.</p>

                <p><button id="button-send-notification">Send a notification</button></p>

                <script src="https://gist.github.com/jasonpang/8f687db751854428d16c9d3010b2b35f.js"></script>

                <h3>Tag User with Data</h3>

                <p>You can attach simple data to each subscriber -- this can be viewed on our dashboard and used for segmentation when sending messages. <a href="https://documentation.onesignal.com/docs/web-push-tagging-guide" target="doc">Read our tagging guide</a> to learn more.</p>

                <p>Click below to tag yourself with some random data. You can view this on the <a href="https://documentation.onesignal.com/docs/users-and-devices" target="doc">All Users</a> page of your dashboard.</p>

                <p><button id="button-tag-data">Tag yourself with random data</button></p>
                
                <script src="https://gist.github.com/jasonpang/1f315c9e8aa9b7d4f76296de0802e4dc.js"></script>
            </div>

            <div class="hidden show-when-unsubscribed">
                <h3>Subscribe to Notifications</h3>

                <p>If you're not automatically prompted, click below to Subscribe.</p>

                <p><button id="button-subscribe">Subscribe to notifications</button></p>
                
                <script src="https://gist.github.com/jasonpang/42a4386924c1d1d179000992cc56eb4c.js"></script>
            </div>

            <div class="hidden show-when-subscribed-and-opted-out">
                <h3>Resubscribe to Notifications</h3>

                <p>It looks like you've manually opted out of receiving notifications.</p>

                <p>You can click the red notify button to opt-in again, or the button below.</p>

                <p><button id="button-resubscribe">Reubscribe to notifications</button></p>
                
                <script src="https://gist.github.com/jasonpang/4bd3583ad22d0a0e30dc300bfbc84b2b.js"></script>
            </div>
        </section>
        <footer>
        </footer>
    </div>
    <script>
        window.OneSignal = window.OneSignal || [];
        window.OneSignal.push(function() {
            OneSignal.log.setLevel('trace');
        });
    </script>
    <script src="javascripts/scale.fix.js"></script>

</body>

</html>
